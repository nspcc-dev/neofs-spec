<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="873px" preserveAspectRatio="none" style="width:698px;height:873px;" version="1.1" viewBox="0 0 698 873" width="698px" zoomAndPan="magnify"><defs><filter height="300%" id="f6pvivwjl97rr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="403" cy="20" fill="#000000" filter="url(#f6pvivwjl97rr)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f6pvivwjl97rr)" height="34.0625" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="284" x="261" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="264" x="271" y="71.1328">Take inactive list from FS chain Netmap contract</text><rect fill="#FEFECE" filter="url(#f6pvivwjl97rr)" height="34.0625" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="518" x="144" y="152.5078"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="498" x="154" y="173.6406">Take candiate list from mainnet DesignationContract and filter out inactive or invalid nodes</text><path d="M255,252.2754 L255,292.7441 A0,0 0 0 0 255,292.7441 L373,292.7441 A0,0 0 0 0 373,292.7441 L373,276.5098 L393,272.5098 L373,268.5098 L373,262.2754 L363,252.2754 L255,252.2754 A0,0 0 0 0 255,252.2754 " fill="#FBFB77" filter="url(#f6pvivwjl97rr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M363,252.2754 L363,262.2754 L373,262.2754 L363,252.2754 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="261" y="269.3359">There is no need</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="261" y="284.5703">to change IR list</text><ellipse cx="403" cy="272.5098" fill="#FFFFFF" filter="url(#f6pvivwjl97rr)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="396.8128" x2="409.1872" y1="266.3226" y2="278.6969"/><line style="stroke: #000000; stroke-width: 2.5;" x1="409.1872" x2="396.8128" y1="266.3226" y2="278.6969"/><polygon fill="#FEFECE" filter="url(#f6pvivwjl97rr)" points="290.5,206.5703,515.5,206.5703,527.5,218.5703,515.5,230.5703,290.5,230.5703,278.5,218.5703,290.5,206.5703" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="407" y="240.7754">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="225" x="290.5" y="222.3301">Are first seven candidates in active IR list?</text><polygon fill="#FEFECE" filter="url(#f6pvivwjl97rr)" points="214,104.0625,592,104.0625,604,116.0625,592,128.0625,214,128.0625,202,116.0625,214,104.0625" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="407" y="138.2676">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="378" x="214" y="119.8223">Are there inactive nodes in active IR list or need to change IR number?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="604" y="113.377">yes</text><polygon fill="#FEFECE" filter="url(#f6pvivwjl97rr)" points="403,334.7441,415,346.7441,403,358.7441,391,346.7441,403,334.7441" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M10,375.541 L10,416.0098 A0,0 0 0 0 10,416.0098 L124,416.0098 A0,0 0 0 0 124,416.0098 L124,399.7754 L144,395.7754 L124,391.7754 L124,385.541 L114,375.541 L10,375.541 A0,0 0 0 0 10,375.541 " fill="#FBFB77" filter="url(#f6pvivwjl97rr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M114,375.541 L114,385.541 L124,385.541 L114,375.541 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="16" y="392.6016">May be cached</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="16" y="407.8359">at previous step</text><rect fill="#FEFECE" filter="url(#f6pvivwjl97rr)" height="34.0625" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="518" x="144" y="378.7441"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="498" x="154" y="399.877">Take candiate list from mainnet DesignationContract and filter out inactive or invalid nodes</text><path d="M172,426.0098 L172,496.9473 A0,0 0 0 0 172,496.9473 L294,496.9473 A0,0 0 0 0 294,496.9473 L294,465.4785 L314,461.4785 L294,457.4785 L294,436.0098 L284,426.0098 L172,426.0098 A0,0 0 0 0 172,426.0098 " fill="#FBFB77" filter="url(#f6pvivwjl97rr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M284,426.0098 L284,436.0098 L294,436.0098 L284,426.0098 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="178" y="443.0703">Alphabet IR list</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="178" y="458.3047">must only be</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="178" y="473.5391">changed by 1/3-1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="178" y="488.7734">nodes at once</text><rect fill="#FEFECE" filter="url(#f6pvivwjl97rr)" height="34.0625" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="314" y="444.4473"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="324" y="465.5801">Calculate Alphabet IR change</text><rect fill="#FEFECE" filter="url(#f6pvivwjl97rr)" height="34.0625" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="424" x="191" y="516.9473"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="404" x="201" y="538.0801">Take current IR list non-Alphabet tail and filter out inactive or invalid nodes</text><rect fill="#FEFECE" filter="url(#f6pvivwjl97rr)" height="34.0625" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="487" x="159.5" y="619.4551"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="467" x="169.5" y="640.5879">Take candiate list from mainnet NeoFS contract and filter out inactive or invalid nodes</text><rect fill="#FEFECE" filter="url(#f6pvivwjl97rr)" height="34.0625" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="217" x="294.5" y="688.5176"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="197" x="304.5" y="709.6504">Append new candidates to IR list tail</text><polygon fill="#FEFECE" filter="url(#f6pvivwjl97rr)" points="344.5,571.0098,461.5,571.0098,473.5,583.0098,461.5,595.0098,344.5,595.0098,332.5,583.0098,344.5,571.0098" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="407" y="605.2148">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="344.5" y="586.7695">Enough IR nodes left?</text><polygon fill="#FEFECE" filter="url(#f6pvivwjl97rr)" points="403,742.5801,415,754.5801,403,766.5801,391,754.5801,403,742.5801" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f6pvivwjl97rr)" height="34.0625" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="373" x="216.5" y="786.5801"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="353" x="226.5" y="807.7129">Invoke Prepare() method of Voting smart contract with new IR list</text><ellipse cx="403" cy="851.6426" fill="#FFFFFF" filter="url(#f6pvivwjl97rr)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="403" cy="851.6426" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="30" y2="50"/><polygon fill="#A80036" points="399,40,403,50,407,40,403,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="230.5703" y2="262.5098"/><polygon fill="#A80036" points="399,252.5098,403,262.5098,407,252.5098,403,256.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="527.5" x2="539.5" y1="218.5703" y2="218.5703"/><polygon fill="#A80036" points="535.5,259.5098,539.5,269.5098,543.5,259.5098,539.5,263.5098" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="539.5" x2="539.5" y1="218.5703" y2="314.7441"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="539.5" x2="403" y1="314.7441" y2="314.7441"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="314.7441" y2="334.7441"/><polygon fill="#A80036" points="399,324.7441,403,334.7441,407,324.7441,403,328.7441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="186.5703" y2="206.5703"/><polygon fill="#A80036" points="399,196.5703,403,206.5703,407,196.5703,403,200.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="128.0625" y2="152.5078"/><polygon fill="#A80036" points="399,142.5078,403,152.5078,407,142.5078,403,146.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="604" x2="672" y1="116.0625" y2="116.0625"/><polygon fill="#A80036" points="668,221.7188,672,231.7188,676,221.7188,672,225.7188" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="672" x2="672" y1="116.0625" y2="346.7441"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="672" x2="415" y1="346.7441" y2="346.7441"/><polygon fill="#A80036" points="425,342.7441,415,346.7441,425,350.7441,421,346.7441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="84.0625" y2="104.0625"/><polygon fill="#A80036" points="399,94.0625,403,104.0625,407,94.0625,403,98.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="358.7441" y2="378.7441"/><polygon fill="#A80036" points="399,368.7441,403,378.7441,407,368.7441,403,372.7441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="412.8066" y2="444.4473"/><polygon fill="#A80036" points="399,434.4473,403,444.4473,407,434.4473,403,438.4473" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="478.5098" y2="516.9473"/><polygon fill="#A80036" points="399,506.9473,403,516.9473,407,506.9473,403,510.9473" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="653.5176" y2="688.5176"/><polygon fill="#A80036" points="399,678.5176,403,688.5176,407,678.5176,403,682.5176" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="595.0098" y2="619.4551"/><polygon fill="#A80036" points="399,609.4551,403,619.4551,407,609.4551,403,613.4551" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="473.5" x2="656.5" y1="583.0098" y2="583.0098"/><polygon fill="#A80036" points="652.5,661.0176,656.5,671.0176,660.5,661.0176,656.5,665.0176" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="656.5" x2="656.5" y1="583.0098" y2="754.5801"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="656.5" x2="415" y1="754.5801" y2="754.5801"/><polygon fill="#A80036" points="425,750.5801,415,754.5801,425,758.5801,421,754.5801" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="722.5801" y2="742.5801"/><polygon fill="#A80036" points="399,732.5801,403,742.5801,407,732.5801,403,736.5801" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="551.0098" y2="571.0098"/><polygon fill="#A80036" points="399,561.0098,403,571.0098,407,561.0098,403,565.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="766.5801" y2="786.5801"/><polygon fill="#A80036" points="399,776.5801,403,786.5801,407,776.5801,403,780.5801" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="403" x2="403" y1="820.6426" y2="840.6426"/><polygon fill="#A80036" points="399,830.6426,403,840.6426,407,830.6426,403,834.6426" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[02ca65e16ed78405b0b1d68554f85292]
@startuml


start


:Take inactive list from FS chain Netmap contract;

if (Are there inactive nodes in active IR list or need to change IR number?) then (yes)
else (no)
  :Take candiate list from mainnet DesignationContract and filter out inactive or invalid nodes;
  if (Are first seven candidates in active IR list?) then (yes)
    end
    note left
      There is no need
      to change IR list
    end note
  endif

endif

:Take candiate list from mainnet DesignationContract and filter out inactive or invalid nodes;
note left
  May be cached
  at previous step
end note

:Calculate Alphabet IR change;
note left
  Alphabet IR list
  must only be
  changed by 1/3-1
  nodes at once
end note

:Take current IR list non-Alphabet tail and filter out inactive or invalid nodes;

if (Enough IR nodes left?) then (no)
:Take candiate list from mainnet NeoFS contract and filter out inactive or invalid nodes;
:Append new candidates to IR list tail;
endif

:Invoke Prepare() method of Voting smart contract with new IR list;

stop


@enduml

PlantUML version 1.2020.09(Sun May 10 13:51:06 MSK 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.25+9-suse-150000.3.119.1-x8664
Operating System: Linux
Default Encoding: UTF-8
Language: ru
Country: RU
--></g></svg>